---
title: 想用 creator 做刮刮卡？慢着，它会崩
date: 2023-06-17 03:15:00
tags:
  - CocosCreator
  - 游戏功能
---

# # 前言

我们项目的版本是 3.6.1，上周同事有个需求是做一个刮刮卡，自然用到了最常用的 Mask 来实现，然后…
采用 3.8 录制（想必大家已经明白了）

<AutoSizeImage src="https://forum.cocos.org/uploads/default/original/3X/9/d/9d34105a9b35f77848c43f9380742d01a42d8747.gif =662x401" />
只要你的小手一直摩擦摩擦，在安卓机和模拟器预览上，会造成 _所有 Mask 失效_

- _真机（模拟器）和网页预览不一致_
  - 浏览器我用 renderTexture 做的刮刮卡刮不了，而模拟器却正常
  - 这个 bug 只会在原生出现，浏览器正常
  - （只测了 3.6.1 - 3.6.3）编辑器保存不了 cc.Graphics 的 lineWidth，重新打开场景就又还原了（确认已经保存，且挂载脚本不会在编辑器状态运行）

<AutoSizeImage src="https://forum.cocos.org/uploads/default/optimized/3X/f/3/f305b580c7d63558213f2a2a1fb48c01a13804e1_2_552x499.gif =552x499" />

- （偶现）shader 内我采样 RenderTexture 然后判断 `color.a != 0.0`

# # RenderTexture 刮刮卡

已经帮大家测过了，安卓不会出现任何问题，IOS 未测， 刮再多也不会异常，[需要的话转商店](https://store.cocos.com/app/detail/5034)

项目内包含两种类型的刮刮卡，首次版本没有做面积统计，大家需要的话回复下

<a href="https://store.cocos.com/app/detail/5034" class="onebox" target="_blank">
  https://store.cocos.com/app/detail/5034
</a>
抱歉，如果我不发帖推广，按照商店的排序规则 _sort(人情世故)_
，你们都不可能看到我的源码（_除非自己搜扩展名，新发布的扩展排名都在十几名开外_
