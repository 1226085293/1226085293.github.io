---
title: 教你获取new出的数组大小
date: 2020-05-07 18:15:16
tags:
  - C++
---

之前在网上没怎么看到获取数组大小的文章，现在给大家说一下自己的方法。
首先，C++new 出的数组或者对象 C++都是知道其内存大小的，既占用字节，而这个占用字节在哪儿呢，没错，就在变量地址 - 4 个 int 占用字节的大小 = 存放 new 对象的占用字节（仅在 64 位环境下测试，32 位也可以试试）。那么知道这个就简单了。

我们可以先获取到存放其占用字节的内存地址，内存地址 = (int*(对象指针)) - 4， 那么我们这样就拿到了存放字节大小的内存地址，如果要获取数组个数就更简单了，直接用字节大小 / 对象类型占用字节 = 数组个数。例：数组个数 = (*((int\*(对象指针)) - 4)) / sizeof(对象类型)， 这样我们就拿到了数组个数，是不是很简单
